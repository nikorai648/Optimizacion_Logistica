{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
   <div class="d-flex align-items-center">
     <img src="{% static 'img/sueldo.webp' %}" class="icono-listado" alt="Sueldo">
  <h3>Sueldos de Trabajadores</h3>
  <a class="btn btn-primary" href="{% url 'core:sueldo_create' %}">Nuevo</a>
  </div>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>RUT</th><th>Nombre</th><th>Mes</th>
      <th>Trabajos/mes</th><th>Sueldo total</th><th>Eficiencia</th><th></th>
    </tr>
  </thead>
  <tbody>
  {% for obj in object_list %}
    <tr>
      <td>{{ obj.trabajador.rut }}</td>
      <td>{{ obj.trabajador.nombre }} {{ obj.trabajador.apellido }}</td>
      <td>{{ obj.mes }}</td>
      <td>{{ obj.cantidad_trabajos_mes }}</td>
      <td>{{ obj.sueldo_total_mes }}</td>
      <td>
        {% if obj.eficiencia %}
          {{ obj.eficiencia.id_eficiencia }} ({{ obj.eficiencia.trabajos_completados_en_1_mes }} t.)
        {% else %}-{% endif %}
      </td>
      <td class="text-end">
        <a class="btn btn-sm btn-secondary" href="{% url 'core:sueldo_update' obj.pk %}">Editar</a>
        <a class="btn btn-sm btn-danger" href="{% url 'core:sueldo_delete' obj.pk %}">Eliminar</a>
      </td>
    </tr>
   {% empty %}
    <tr><td colspan="7">Sin registros</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
